<!DOCTYPE html>
<html lang="en">
<head>
  <title>Temperature and Humidity Readings</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/style.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>
<body>

<nav>
  <h4>LORAWAN</h4>
  <ul>
    <li><a href="/logged">Home</a></li>
    <li><a href="/graphs">Graphs</a></li>
    <li><a href="/locals">Locals</a></li>
    <li><a href="/profile">Profile</a></li>
    <li><a href="/logout">Logout</a></li>
  </ul>
</nav>

<h1>Lista de Sensores</h1>

<table>
  <thead>
    <tr>
      <th>Name Sensor</th>
      <th>Localization</th>
      <th>Description</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    {{#each sensors}}
    <tr>
      <td><a href="/sensorsread/{{this.sensorname}}">{{this.sensorname}}</a></td>
      <td>{{this.location}}</td>
      <td>{{this.description}}</td>
      <td>
        <div class="delete" onclick="deleteSensor({{this.id}})">Delete</div>
      </td>
    </tr>
    {{/each}}
  </tbody>
</table>

<button class="button login__submit">
  <span class="button_sensor"><a href="/addsensor">Add new sensor</a></span>
</button>

<button>
  <a href="/logged">
    <h2>Voltar</h2>
  </a>
</button>

<script>
  const deleteSensor = (id) => {
    fetch('http://localhost:3000/addsensor', {
      method: 'DELETE',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({ id }),
    })
      .then(() => {
        location.reload()
      })
  }
</script>

</body>
</html>
